<launch>
  <arg name="camera_type"  default="ZR300" /> <!-- Type of camera -->
  <arg name="manager"      default="nodelet_manager" />

  <arg name="camera"       default="camera"/>
  <arg name="depth"        default="depth" />
  <arg name="rgb"          default="color" />
  <arg name="ir"           default="ir" />
  <arg name="ir2"          default="ir2" />
  <arg name="fisheye"      default="fisheye" />
  <arg name="imu"          default="imu" />
  <arg name="serial_no"    default="" />
  <arg name="usb_port_id"  default="" />

  <!-- These 'arg' tags are just place-holders for passing values from test files.
  The recommended way is to pass the values directly into the 'param' tags. -->
  <arg name="mode"         default="manual" />
  
  <arg name="depth_width" default="640" />
  <arg name="depth_height" default="480" />
  <arg name="depth_fps" default="30" />

  <arg name="color_width" default="640" />
  <arg name="color_height" default="480" />
  <arg name="color_fps" default="30" />
  
  <arg name="fisheye_fps"       default="30" />
  <arg name="fisheye_strobe"    default="1" />
  <arg name="fisheye_external_trigger"    default="1" />

  <param name="$(arg camera)/driver/mode"              type="str"  value="$(arg mode)" />
  <param name="$(arg camera)/driver/color_fps"         type="int"  value="$(arg color_fps)" />
  <param name="$(arg camera)/driver/fisheye_fps"       type="int"  value="$(arg fisheye_fps)" />
  <param name="$(arg camera)/driver/fisheye_strobe"    type="int"  value="$(arg fisheye_strobe)" />
  <param name="$(arg camera)/driver/fisheye_external_trigger"    type="int"  value="$(arg fisheye_external_trigger)" />
  <!-- Refer to the Wiki http://wiki.ros.org/realsense_camera for list of supported parameters -->

  <group ns="$(arg camera)">
    <node pkg="nodelet" type="nodelet" name="$(arg manager)" args="manager" output="screen"/>

    <node pkg="nodelet" type="nodelet" name="driver"
      args="load realsense_camera/$(arg camera_type)Nodelet $(arg manager)">
      <param name="serial_no"                type="str"  value="$(arg serial_no)" />
      <param name="usb_port_id"              type="str"  value="$(arg usb_port_id)" />
      <param name="camera_type"              type="str"  value="$(arg camera_type)" />
      <param name="base_frame_id"            type="str"  value="$(arg camera)_link" />
      <param name="depth_frame_id"           type="str"  value="$(arg camera)_depth_frame" />
      <param name="color_frame_id"           type="str"  value="$(arg camera)_rgb_frame" />
      <param name="ir_frame_id"              type="str"  value="$(arg camera)_ir_frame" />
      <param name="ir2_frame_id"             type="str"  value="$(arg camera)_ir2_frame" />
      <param name="fisheye_frame_id"         type="str"  value="$(arg camera)_fisheye_frame" />
      <param name="imu_frame_id"             type="str"  value="$(arg camera)_imu_frame" />
      <param name="depth_optical_frame_id"   type="str"  value="$(arg camera)_depth_optical_frame" />
      <param name="color_optical_frame_id"   type="str"  value="$(arg camera)_rgb_optical_frame" />
      <param name="ir_optical_frame_id"      type="str"  value="$(arg camera)_ir_optical_frame" />
      <param name="ir2_optical_frame_id"     type="str"  value="$(arg camera)_ir2_optical_frame" />
      <param name="fisheye_optical_frame_id" type="str"  value="$(arg camera)_fisheye_optical_frame" />
      <param name="imu_optical_frame_id"     type="str"  value="$(arg camera)_imu_optical_frame" />

      <param name="depth_width"  value="$(arg depth_width)" />
      <param name="depth_height" value="$(arg depth_height)" />
      <param name="depth_fps"    value="$(arg depth_fps)" />

      <param name="color_width"   value="$(arg color_width)" />
      <param name="color_height"  value="$(arg color_height)" />
      <param name="color_fps"     value="$(arg color_fps)" />

      <remap from="depth"    to="$(arg depth)" />
      <remap from="color"    to="$(arg rgb)" />
      <remap from="ir"       to="$(arg ir)" />
      <remap from="ir2"      to="$(arg ir2)" />
      <remap from="fisheye"  to="$(arg fisheye)" />
      <remap from="imu"      to="$(arg imu)" />
    </node>
    
  </group>
</launch>